<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> - Hugo Whisper Theme</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.aad43d4ecb69a264f2539b89d7f779d5f3cdff22e7585fe5fc3c77272f1c2696.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="/"><img alt="Logo" src="/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="/"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            



<div class="docs-menu">
  <div class="form-input-group mb-3 pr-3">
    <label>Version</label>
    <div class="custom_select">
      <select onchange="this.options[this.selectedIndex].value && (window.location = this.options[this.selectedIndex].value);">
        
          
            <option value="/docs/">docs</option>
          
        
          
            <option value="/v1.5/" selected>v1.5</option>
          
        
      </select>
    </div>
  </div>
  <ul class="toc">
    
    <h1 id="table-of-contents">Table of contents</h1>
<ul>
<li><a href="README.md">Introduction</a></li>
</ul>
<h2 id="prologue">Prologue</h2>
<ul>
<li><a href="prologue/introduction-and-installaton.md">Introduction and Installaton</a></li>
<li><a href="prologue/contributing-guide.md">Contributing Guide</a></li>
<li><a href="prologue/how-to-contribute.md">How To Contribute</a></li>
<li><a href="prologue/release-cycle.md">Release Cycle</a></li>
</ul>
<h2 id="whats-new">What&rsquo;s New</h2>
<ul>
<li><a href="whats-new/masonite-1.3.md">Masonite 1.3</a></li>
<li><a href="whats-new/masonite-1.4.md">Masonite 1.4</a></li>
<li><a href="whats-new/masonite-1.5.md">Masonite 1.5</a></li>
</ul>
<h2 id="upgrade-guide">Upgrade Guide</h2>
<ul>
<li><a href="upgrade-guide/masonite-1.3-to-1.4.md">Masonite 1.3 to 1.4</a></li>
<li><a href="upgrade-guide/masonite-1.4-to-1.5.md">Masonite 1.4 to 1.5</a></li>
</ul>
<h2 id="the-basics">The Basics</h2>
<ul>
<li><a href="the-basics/routing.md">Routing</a></li>
<li><a href="the-basics/controllers.md">Controllers</a></li>
<li><a href="the-basics/views.md">Views</a></li>
<li><a href="the-basics/requests.md">Requests</a></li>
<li><a href="the-basics/static-files.md">Static Files</a></li>
<li><a href="the-basics/helper-functions.md">Helper Functions</a></li>
</ul>
<h2 id="the-craft-command">The Craft Command</h2>
<ul>
<li><a href="the-craft-command/introduction.md">Introduction</a></li>
<li><a href="the-craft-command/creating-commands.md">Creating Commands</a></li>
<li><a href="the-craft-command/authentication-system.md">Authentication System</a></li>
</ul>
<h2 id="architectural-concepts">Architectural Concepts</h2>
<ul>
<li><a href="architectural-concepts/request-lifecycle.md">Request Lifecycle</a></li>
<li><a href="architectural-concepts/service-providers.md">Service Providers</a></li>
<li><a href="architectural-concepts/service-container.md">Service Container</a></li>
</ul>
<h2 id="advanced">Advanced</h2>
<ul>
<li><a href="advanced/middleware.md">Middleware</a></li>
<li><a href="advanced/validation.md">Validation</a></li>
<li><a href="advanced/creating-packages.md">Creating Packages</a></li>
<li><a href="advanced/extending-classes.md">Extending Classes</a></li>
<li><a href="advanced/creating-a-mail-driver.md">Creating a Mail Driver</a></li>
<li><a href="advanced/sessions.md">Sessions</a></li>
</ul>
<h2 id="useful-features">Useful Features</h2>
<ul>
<li><a href="useful-features/template-caching.md">Template Caching</a></li>
<li><a href="useful-features/mail.md">Mail</a></li>
<li><a href="useful-features/uploading.md">Uploading</a></li>
<li><a href="useful-features/view-composers-and-sharing.md">View Composers and Sharing</a></li>
<li><a href="useful-features/caching.md">Caching</a></li>
<li><a href="useful-features/broadcasting.md">Broadcasting</a></li>
<li><a href="useful-features/queues-and-jobs.md">Queues and Jobs</a></li>
<li><a href="useful-features/compiling-assets.md">Compiling Assets</a></li>
</ul>
<h2 id="security">Security</h2>
<ul>
<li><a href="security/authentication.md">Authentication</a></li>
<li><a href="security/encryption.md">Encryption</a></li>
<li><a href="security/csrf-protection.md">CSRF Protection</a></li>
</ul>
<h2 id="orator-orm">Orator ORM</h2>
<ul>
<li><a href="https://orator-orm.com/docs/0.9/basic_usage.html">Basic Usage</a></li>
<li><a href="https://orator-orm.com/docs/0.9/query_builder.html">Query Builder</a></li>
<li><a href="https://orator-orm.com/docs/0.9/orm.html">ORM</a></li>
<li><a href="https://orator-orm.com/docs/0.9/pagination.html">Pagination</a></li>
<li><a href="https://orator-orm.com/docs/0.9/schema_builder.html">Schema Builder</a></li>
<li><a href="orator-orm/database-migrations.md">Database Migrations</a></li>
<li><a href="https://orator-orm.com/docs/0.9/collections.html">Collections</a></li>
</ul>
<h2 id="managers-and-drivers">Managers and Drivers</h2>
<ul>
<li><a href="managers-and-drivers/about-managers.md">About Managers</a></li>
<li><a href="managers-and-drivers/about-drivers.md">About Drivers</a></li>
<li><a href="managers-and-drivers/contracts.md">Contracts</a></li>
</ul>
<h2 id="official-packages">Official Packages</h2>
<ul>
<li><a href="https://masoniteframework.gitbooks.io/masonite-entry/content/">Masonite Entry</a></li>
<li><a href="http://billing.masoniteproject.com">Masonite Billing</a></li>
</ul>
<h2 id="creating-your-first-blog">Creating Your First Blog</h2>
<ul>
<li><a href="creating-your-first-blog/introduction.md">Introduction</a></li>
<li><a href="creating-your-first-blog/part-1-creating-our-first-route.md">Part 1 - Creating Our First Route</a></li>
<li><a href="creating-your-first-blog/part-2-creating-our-first-controller.md">Part 2 - Creating Our First Controller</a></li>
<li><a href="creating-your-first-blog/part-3-designing-our-blog.md">Part 3 - Designing Our Blog</a></li>
<li><a href="creating-your-first-blog/part-4-migrations.md">Part 4 - Migrations</a></li>
<li><a href="creating-your-first-blog/part-5-models.md">Part 5 - Models</a></li>
<li><a href="creating-your-first-blog/part-3-authentication.md">Part 3 - Authentication</a></li>
</ul>
    
  </ul>
</div>


          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title"></h1>
<div class="content ">
  <h1 id="creating-commands">Creating Commands</h1>
<h1 id="introduction">Introduction</h1>
<p>Creating a command is quite simple with Masonite and allows other developers to use your package in the command line similiar to a <code>craft</code> command by running <code>craft-vendor</code>. In this documentation we&rsquo;ll talk about how to create a package that can expand the <code>craft</code> tool by using <code>craft-vendor</code> which comes with the <code>masonite-cli</code> pip package.</p>
<h2 id="virtual-environments">Virtual Environments</h2>
<p>It&rsquo;s important to note that <code>craft-vendor</code> does not have access to your virtual environment by default, only your system packages. What we can do is add our virtual environment&rsquo;s <code>site_packages</code> directory to our <code>config/packages.py</code> config file which should look something like:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">SITE_PACKAGES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;venv/lib/python3.6/site-packages&#39;</span>
<span class="p">]</span>
</code></pre></div><p>This will take those paths and temporarily add it to the <code>sys.path</code> for the duration of the <code>craft-vendor</code> command.</p>
<h3 id="getting-started">Getting Started</h3>
<p>The <code>craft</code> command comes with a <code>package</code> helper and can be used to create the boilerplate for Masonite packages. We can use this boilerplate to quickly create a package that can be used on the masonite command line. Lets create our boiler plate now by navigating to a directory we would like to build our package in and run:</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="err">$</span> <span class="nx">craft</span> <span class="kn">package</span> <span class="nx">testpackage</span>
</code></pre></div><p>This will create a file structure like:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">testpackage/
    __init__.py
    integration.py
MANIFEST.in
setup.py
</code></pre></div><p>You can ignore the integration file for now as we won&rsquo;t be using it in this tutorial. This integration file is used to scaffold other Masonite projects (like adding configuration files, controllers, routes etc.)</p>
<h3 id="commands-module">Commands module</h3>
<p>All Masonite packages that would like users to interact with their package via the command line will need a <code>commands</code> module. Let&rsquo;s create one now and make our package structure look like:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">testpackage/
    __init__.py
    integration.py
    commands/
        __init__.py
        testpackage.py
MANIFEST.in
setup.py
</code></pre></div><h3 id="craft-vendor-commands">Craft Vendor Commands</h3>
<p>The <code>craft-vendor</code> command is separate from our normal <code>craft</code> command but is primarily for running third party package commands. This is apart of the <code>masonite-cli</code> package.</p>
<p>How the <code>craft-vendor</code> command works is there are three possible commands that can be ran after someone installs your package:</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="err">$</span> <span class="nx">craft</span><span class="o">-</span><span class="nx">vendor</span> <span class="nx">testpackage</span>
<span class="err">$</span> <span class="nx">craft</span><span class="o">-</span><span class="nx">vendor</span> <span class="nx">testpackage</span> <span class="nx">submodule</span>
<span class="err">$</span> <span class="nx">craft</span><span class="o">-</span><span class="nx">vendor</span> <span class="nx">testpackage</span> <span class="nx">submodule</span> <span class="nx">function_name</span>
</code></pre></div><h3 id="running-craft-vendor-testpackage">Running craft-vendor testpackage</h3>
<p>This allows for some flexibility in how your commands can be ran. Lets start by explaining how the first command will interact with your package.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ craft-vendor testpackage
</code></pre></div><p>When the user runs this command, <code>craft-vendor</code> will look for a package called <code>testpackage</code>. Once it is found, it will look into the <code>commands</code> module and look for a file called <code>testpackage</code>, and then a function in that file called <code>testpackage</code> and execute that function. In this instance, we might have a structure like:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">testpackage/
    __init__.py
    integration.py
    commands/
        __init__.py
        testpackage.py
MANIFEST.in
setup.py
</code></pre></div><p>and then inside <code>testpackage/commands/testpackage</code> will look like:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">testpackage</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;you have just ran the craft-vendor testpackage command&#39;</span><span class="p">)</span>
</code></pre></div><h3 id="running-craft-vendor-testpackage-payment">Running craft-vendor testpackage payment</h3>
<p>When the user runs this command, it will find the package called <code>testpackage</code>, look inside the <code>commands</code> module and for a file called <code>payments.py</code> and execute a function called <code>payments</code>. In this instance, we might have a structure like:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">testpackage/
    __init__.py
    integration.py
    commands/
        __init__.py
        testpackage.py
        payments.py
MANIFEST.in
setup.py
</code></pre></div><p>and then inside <code>testpackage/commands/payments.py</code> will look like:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">payments</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;you have just ran the craft-vendor testpackage payments command&#39;</span><span class="p">)</span>
</code></pre></div><h3 id="running-craft-vendor-testpackage-payment-stripe">Running craft-vendor testpackage payment stripe</h3>
<p>Lastly, When the user runs this command, it will find the package called <code>testpackage</code>, look inside the <code>commands</code> module and for a file called <code>payments.py</code> and execute a function called <code>stripe</code>. In this instance, we might have a structure like:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">testpackage/
    __init__.py
    integration.py
    commands/
        __init__.py
        testpackage.py
        payments.py
MANIFEST.in
setup.py
</code></pre></div><p>and then inside <code>testpackage/commands/payments.py</code> will look like:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">stripe</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;you have just ran the craft-vendor testpackage payments stripe command&#39;</span><span class="p">)</span>
</code></pre></div><h3 id="uploading-to-pypi">Uploading to PyPi</h3>
<p>If you have never set up a package before then you&rsquo;ll need to <div>
    <a href="check%20how%20to%20make%20a%20%3ccode%3e.pypirc%3c/code%3e%20file" target="_blank">check how to make a <code>.pypirc</code> file</a>
</div>. This file will hold our PyPi credentials.</p>
<p>To upload to PyPi we just have to think of an awesome name for our package and put it in the <code>setup.py</code> file. Now that you have a super awesome name, we&rsquo;ll just need to run:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ python setup.py sdist upload
</code></pre></div><p>which should upload your package with your credentials from your <code>.pypirc</code> file. Make sure you click the link above and see how to make one.</p>
<h3 id="working-with-our-package">Working With Our Package</h3>
<p>We can either test our package locally or upload our package to PyPi.</p>
<p>To test our package locally, if you use virtual environments, just go to your Masonite project and activate your virtual environment. Navigate to the folder where you created your package via the command line and run:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pip install .
</code></pre></div><p>If you want to be able to make changes without having to constantly reinstall your package then run</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pip install --editable .
</code></pre></div><p>This will install your new package into your virtual environment. Go back to your project root so we can run our <code>craft-vendor</code> command. If we run <code>craft-vendor testpackage</code> we should see the respective print message. Try running all three commands and see the different print output. If you are getting an error of ModuleNotFound and you are inside a virtual environment, don&rsquo;t forget to add the <code>site_packages</code> directory to your <code>config/packages.py</code> by following the instructions at the top of this documentation.</p>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
