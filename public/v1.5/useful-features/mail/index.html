<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> - Hugo Whisper Theme</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.aad43d4ecb69a264f2539b89d7f779d5f3cdff22e7585fe5fc3c77272f1c2696.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="/"><img alt="Logo" src="/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="/"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            



<div class="docs-menu">
  <div class="form-input-group mb-3 pr-3">
    <label>Version</label>
    <div class="custom_select">
      <select onchange="this.options[this.selectedIndex].value && (window.location = this.options[this.selectedIndex].value);">
        
          
            <option value="/docs/">docs</option>
          
        
          
            <option value="/v1.5/" selected>v1.5</option>
          
        
      </select>
    </div>
  </div>
  <ul class="toc">
    
    <h1 id="table-of-contents">Table of contents</h1>
<ul>
<li><a href="README.md">Introduction</a></li>
</ul>
<h2 id="prologue">Prologue</h2>
<ul>
<li><a href="prologue/introduction-and-installaton.md">Introduction and Installaton</a></li>
<li><a href="prologue/contributing-guide.md">Contributing Guide</a></li>
<li><a href="prologue/how-to-contribute.md">How To Contribute</a></li>
<li><a href="prologue/release-cycle.md">Release Cycle</a></li>
</ul>
<h2 id="whats-new">What&rsquo;s New</h2>
<ul>
<li><a href="whats-new/masonite-1.3.md">Masonite 1.3</a></li>
<li><a href="whats-new/masonite-1.4.md">Masonite 1.4</a></li>
<li><a href="whats-new/masonite-1.5.md">Masonite 1.5</a></li>
</ul>
<h2 id="upgrade-guide">Upgrade Guide</h2>
<ul>
<li><a href="upgrade-guide/masonite-1.3-to-1.4.md">Masonite 1.3 to 1.4</a></li>
<li><a href="upgrade-guide/masonite-1.4-to-1.5.md">Masonite 1.4 to 1.5</a></li>
</ul>
<h2 id="the-basics">The Basics</h2>
<ul>
<li><a href="the-basics/routing.md">Routing</a></li>
<li><a href="the-basics/controllers.md">Controllers</a></li>
<li><a href="the-basics/views.md">Views</a></li>
<li><a href="the-basics/requests.md">Requests</a></li>
<li><a href="the-basics/static-files.md">Static Files</a></li>
<li><a href="the-basics/helper-functions.md">Helper Functions</a></li>
</ul>
<h2 id="the-craft-command">The Craft Command</h2>
<ul>
<li><a href="the-craft-command/introduction.md">Introduction</a></li>
<li><a href="the-craft-command/creating-commands.md">Creating Commands</a></li>
<li><a href="the-craft-command/authentication-system.md">Authentication System</a></li>
</ul>
<h2 id="architectural-concepts">Architectural Concepts</h2>
<ul>
<li><a href="architectural-concepts/request-lifecycle.md">Request Lifecycle</a></li>
<li><a href="architectural-concepts/service-providers.md">Service Providers</a></li>
<li><a href="architectural-concepts/service-container.md">Service Container</a></li>
</ul>
<h2 id="advanced">Advanced</h2>
<ul>
<li><a href="advanced/middleware.md">Middleware</a></li>
<li><a href="advanced/validation.md">Validation</a></li>
<li><a href="advanced/creating-packages.md">Creating Packages</a></li>
<li><a href="advanced/extending-classes.md">Extending Classes</a></li>
<li><a href="advanced/creating-a-mail-driver.md">Creating a Mail Driver</a></li>
<li><a href="advanced/sessions.md">Sessions</a></li>
</ul>
<h2 id="useful-features">Useful Features</h2>
<ul>
<li><a href="useful-features/template-caching.md">Template Caching</a></li>
<li><a href="useful-features/mail.md">Mail</a></li>
<li><a href="useful-features/uploading.md">Uploading</a></li>
<li><a href="useful-features/view-composers-and-sharing.md">View Composers and Sharing</a></li>
<li><a href="useful-features/caching.md">Caching</a></li>
<li><a href="useful-features/broadcasting.md">Broadcasting</a></li>
<li><a href="useful-features/queues-and-jobs.md">Queues and Jobs</a></li>
<li><a href="useful-features/compiling-assets.md">Compiling Assets</a></li>
</ul>
<h2 id="security">Security</h2>
<ul>
<li><a href="security/authentication.md">Authentication</a></li>
<li><a href="security/encryption.md">Encryption</a></li>
<li><a href="security/csrf-protection.md">CSRF Protection</a></li>
</ul>
<h2 id="orator-orm">Orator ORM</h2>
<ul>
<li><a href="https://orator-orm.com/docs/0.9/basic_usage.html">Basic Usage</a></li>
<li><a href="https://orator-orm.com/docs/0.9/query_builder.html">Query Builder</a></li>
<li><a href="https://orator-orm.com/docs/0.9/orm.html">ORM</a></li>
<li><a href="https://orator-orm.com/docs/0.9/pagination.html">Pagination</a></li>
<li><a href="https://orator-orm.com/docs/0.9/schema_builder.html">Schema Builder</a></li>
<li><a href="orator-orm/database-migrations.md">Database Migrations</a></li>
<li><a href="https://orator-orm.com/docs/0.9/collections.html">Collections</a></li>
</ul>
<h2 id="managers-and-drivers">Managers and Drivers</h2>
<ul>
<li><a href="managers-and-drivers/about-managers.md">About Managers</a></li>
<li><a href="managers-and-drivers/about-drivers.md">About Drivers</a></li>
<li><a href="managers-and-drivers/contracts.md">Contracts</a></li>
</ul>
<h2 id="official-packages">Official Packages</h2>
<ul>
<li><a href="https://masoniteframework.gitbooks.io/masonite-entry/content/">Masonite Entry</a></li>
<li><a href="http://billing.masoniteproject.com">Masonite Billing</a></li>
</ul>
<h2 id="creating-your-first-blog">Creating Your First Blog</h2>
<ul>
<li><a href="creating-your-first-blog/introduction.md">Introduction</a></li>
<li><a href="creating-your-first-blog/part-1-creating-our-first-route.md">Part 1 - Creating Our First Route</a></li>
<li><a href="creating-your-first-blog/part-2-creating-our-first-controller.md">Part 2 - Creating Our First Controller</a></li>
<li><a href="creating-your-first-blog/part-3-designing-our-blog.md">Part 3 - Designing Our Blog</a></li>
<li><a href="creating-your-first-blog/part-4-migrations.md">Part 4 - Migrations</a></li>
<li><a href="creating-your-first-blog/part-5-models.md">Part 5 - Models</a></li>
<li><a href="creating-your-first-blog/part-3-authentication.md">Part 3 - Authentication</a></li>
</ul>
    
  </ul>
</div>


          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title"></h1>
<div class="content ">
  <h1 id="mail">Mail</h1>
<h2 id="introduction">Introduction</h2>
<p>Masonite comes with email support out of the box. Most projects you make will need to send emails upon actions like account creation or notifications. Because email is used so often with software applications, masonite provides mail support with several drivers.</p>
<h2 id="getting-started">Getting Started</h2>
<p>All mail configuration is inside <code>config/mail.py</code> and contains several well documented options. There are several built in drivers you can use but you can make your own if you&rsquo;d like.</p>
<p>{% hint style=&quot;success&rdquo; %}
You can follow the documentation here at <div>
    <a href="Creating%20a%20Mail%20Driver">Creating a Mail Driver</a>
</div>. If you do make your own, consider making it available on PyPi so others can install it. We may even put it in Masonite by default.
{% endhint %}</p>
<p>By default, Masonite uses the <code>smtp</code> driver. Inside your <code>.env</code> file, just put your smtp credentials. If you are using Mailgun then switch your driver to <code>mailgun</code> and put your Mailgun credentials in your <code>.env</code> file.</p>
<h2 id="configuring-drivers">Configuring Drivers</h2>
<p>There are two drivers out of the box that masonite uses and there is a tiny bit of configuration for both.</p>
<h3 id="smtp-driver">SMTP Driver</h3>
<p>The SMTP driver takes several configuration files we can all put in our <code>.env</code> file.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&rdquo;.env&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">MAIL_DRIVER=smtp
MAIL_FROM_ADDRESS=admin@email.com
MAIL_FROM_NAME=Masonite
MAIL_HOST=smtp.gmail.com
MAIL_PORT=465
MAIL_USERNAME=admin@email.com
MAIL_PASSWORD=password
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>Because this is SMTP, we can utilize all SMTP services such as mailtrap and gmail.</p>
<p>Thats it! As long as the authentication works, we can send emails.</p>
<p>{% hint style=&quot;danger&rdquo; %}
Remember that it is save to put sensitive data in your <code>.env</code> file because it is not committed to source control and it is inside the <code>.gitignore</code> file by default.
{% endhint %}</p>
<h3 id="mailgun-driver">Mailgun Driver</h3>
<p>Mailgun does not use SMTP and instead uses API calls to their service to send emails. Mailgun only requires 2 configuration settings:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&rdquo;.env&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">MAILGUN_SECRET=key-xx
MAILGUN_DOMAIN=sandboxXX.mailgun.org
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>If you change to using Mailgun then you will need to change the driver. By default the driver looks like:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;config/mail.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">DRIVER</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;MAIL_DRIVER&#39;</span><span class="p">,</span> <span class="s1">&#39;smtp&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>This means you can specify the mail driver in the .env file:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&rdquo;.env&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">MAIL_DRIVER=mailgun
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>or we can specify the driver directly inside <code>config/mail.py</code></p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;config/mail.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">DRIVER</span> <span class="o">=</span> <span class="s1">&#39;mailgun&#39;</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>Masonite will retrieve the configuration settings for the mailgun driver from the <code>DRIVERS</code> configuration setting which Masonite has by default, you do not have to change this.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;config/mail.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">DRIVERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span>
    <span class="s1">&#39;mailgun&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;secret&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;MAILGUN_SECRET&#39;</span><span class="p">,</span> <span class="s1">&#39;key-XX&#39;</span><span class="p">),</span>
        <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;MAILGUN_DOMAIN&#39;</span><span class="p">,</span> <span class="s1">&#39;sandboxXX.mailgun.org&#39;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<h2 id="sending-an-email">Sending an Email</h2>
<p>The <code>Mail</code> class is loaded into the container via the the <code>MailProvider</code> Service Provider. We can fetch this <code>Mail</code> class via our controller methods:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Mail</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">Mail</span><span class="p">)</span> <span class="c1"># returns the default mail driver</span>
</code></pre></div><p>We can send an email like so:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Mail</span><span class="p">):</span>
    <span class="n">Mail</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;hello@email.com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Welcome!&#39;</span><span class="p">)</span>
</code></pre></div><p>You can also obviously specify a specific user:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">app.User</span> <span class="kn">import</span> <span class="n">User</span>
<span class="o">...</span>
<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Mail</span><span class="p">):</span>
    <span class="n">Mail</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">email</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Welcome!&#39;</span><span class="p">)</span>
</code></pre></div><h2 id="switching-drivers">Switching Drivers</h2>
<p>All mail drivers are managed by the <code>MailManager</code> class and bootstrapped with the <code>MailProvider</code> Service Provider.</p>
<p>We can specify which driver we want to use. Although Masonite will use the <code>DRIVER</code> variable in our <code>mail</code> config file by default, we can change the driver on the fly.</p>
<p>You can see in our <code>MailProvider</code> Service Provider that we can use the <code>MailManager</code> class to set the driver. We can use this same class to change the driver:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MailManager</span><span class="p">):</span>
    <span class="n">MailManager</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span><span class="s1">&#39;mailgun&#39;</span><span class="p">)</span> <span class="c1"># now uses the Mailgun driver</span>
</code></pre></div><h2 id="queues">Queues</h2>
<p>Sending an email may take several seconds so it might be a good idea to create a Job. Jobs are simply Python classes that inherit from the <code>Queueable</code> class and can be pushed to queues or ran asynchronously. This will look something like:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">app.jobs.SendWelcomeEmail</span> <span class="kn">import</span> <span class="n">SendWelcomeEmail</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Queue</span><span class="p">):</span>
    <span class="n">Queue</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">SendWelcomeEmail</span><span class="p">)</span>
</code></pre></div><p>Instead of taking seconds to send an email, this will seem immediate and be sent using whatever queue driver is set. The <code>async</code> driver is set by default which requires no additional configuration and simply sends jobs into a new thread to be ran in the background.</p>
<p>{% hint style=&quot;success&rdquo; %}
Read more about creating Jobs and sending emails asynchronously in the <div>
    <a href="Queues%20and%20Jobs">Queues and Jobs</a>
</div> documentation.
{% endhint %}</p>
<h2 id="methods">Methods</h2>
<p>We can also specify the subject:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">Mail</span><span class="o">.</span><span class="n">subject</span><span class="p">(</span><span class="s1">&#39;Welcome!&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;hello@email.com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Welcome!&#39;</span><span class="p">)</span>
</code></pre></div><p>You can specify which address you want the email to appear from:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">Mail</span><span class="o">.</span><span class="n">send_from</span><span class="p">(</span><span class="s1">&#39;Admin@email.com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;hello@email.com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Welcome!&#39;</span><span class="p">)</span>
</code></pre></div><h2 id="templates">Templates</h2>
<p>If you don&rsquo;t want to pass a string as the message, you can pass a view template.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">Mail</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;idmann509@gmail.com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">template</span><span class="p">(</span><span class="s1">&#39;mail/welcome&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">()</span>
</code></pre></div><p>This will render the view into a message body and send the email as html. Notice that we didn&rsquo;t pass anything into the <code>send</code> message</p>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
