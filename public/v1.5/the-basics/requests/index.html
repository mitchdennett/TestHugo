<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> - Hugo Whisper Theme</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.aad43d4ecb69a264f2539b89d7f779d5f3cdff22e7585fe5fc3c77272f1c2696.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="/"><img alt="Logo" src="/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="/"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            




<div class="docs-menu">
  <div class="form-input-group mb-3 pr-3">
    <label>Version</label>
    <div class="custom_select">
      <select onchange="this.options[this.selectedIndex].value && (window.location = this.options[this.selectedIndex].value);">
        
          
            <option value="/docs/">docs</option>
          
        
          
            <option value="/v1.5/" selected>v1.5</option>
          
        
          
            <option value="/headless/">headless</option>
          
        
      </select>
    </div>
  </div>
  <ul class="toc">
    <h1 id="table-of-contents">Table of contents</h1>
<ul>
<li><a href="Introduction">Introduction</a></li>
</ul>
<h2 id="prologue">Prologue</h2>
<ul>
<li><a href="Introduction%20and%20Installaton">Introduction and Installaton</a></li>
<li><a href="Contributing%20Guide">Contributing Guide</a></li>
<li><a href="How%20To%20Contribute">How To Contribute</a></li>
<li><a href="Release%20Cycle">Release Cycle</a></li>
</ul>
<h2 id="whats-new">What&rsquo;s New</h2>
<ul>
<li><a href="Masonite%201.3">Masonite 1.3</a></li>
<li><a href="Masonite%201.4">Masonite 1.4</a></li>
<li><a href="Masonite%201.5">Masonite 1.5</a></li>
</ul>
<h2 id="upgrade-guide">Upgrade Guide</h2>
<ul>
<li><a href="Masonite%201.3%20to%201.4">Masonite 1.3 to 1.4</a></li>
<li><a href="Masonite%201.4%20to%201.5">Masonite 1.4 to 1.5</a></li>
</ul>
<h2 id="the-basics">The Basics</h2>
<ul>
<li><a href="Routing">Routing</a></li>
<li><a href="Controllers">Controllers</a></li>
<li><a href="Views">Views</a></li>
<li><a href="Requests">Requests</a></li>
<li><a href="Static%20Files">Static Files</a></li>
<li><a href="Helper%20Functions">Helper Functions</a></li>
</ul>
<h2 id="the-craft-command">The Craft Command</h2>
<ul>
<li><a href="Introduction">Introduction</a></li>
<li><a href="Creating%20Commands">Creating Commands</a></li>
<li><a href="Authentication%20System">Authentication System</a></li>
</ul>
<h2 id="architectural-concepts">Architectural Concepts</h2>
<ul>
<li><a href="Request%20Lifecycle">Request Lifecycle</a></li>
<li><a href="Service%20Providers">Service Providers</a></li>
<li><a href="Service%20Container">Service Container</a></li>
</ul>
<h2 id="advanced">Advanced</h2>
<ul>
<li><a href="Middleware">Middleware</a></li>
<li><a href="Validation">Validation</a></li>
<li><a href="Creating%20Packages">Creating Packages</a></li>
<li><a href="Extending%20Classes">Extending Classes</a></li>
<li><a href="Creating%20a%20Mail%20Driver">Creating a Mail Driver</a></li>
<li><a href="Sessions">Sessions</a></li>
</ul>
<h2 id="useful-features">Useful Features</h2>
<ul>
<li><a href="Template%20Caching">Template Caching</a></li>
<li><a href="Mail">Mail</a></li>
<li><a href="Uploading">Uploading</a></li>
<li><a href="View%20Composers%20and%20Sharing">View Composers and Sharing</a></li>
<li><a href="Caching">Caching</a></li>
<li><a href="Broadcasting">Broadcasting</a></li>
<li><a href="Queues%20and%20Jobs">Queues and Jobs</a></li>
<li><a href="Compiling%20Assets">Compiling Assets</a></li>
</ul>
<h2 id="security">Security</h2>
<ul>
<li><a href="Authentication">Authentication</a></li>
<li><a href="Encryption">Encryption</a></li>
<li><a href="CSRF%20Protection">CSRF Protection</a></li>
</ul>
<h2 id="orator-orm">Orator ORM</h2>
<ul>
<li><a href="Basic%20Usage" target="_blank">Basic Usage</a></li>
<li><a href="Query%20Builder" target="_blank">Query Builder</a></li>
<li><a href="ORM" target="_blank">ORM</a></li>
<li><a href="Pagination" target="_blank">Pagination</a></li>
<li><a href="Schema%20Builder" target="_blank">Schema Builder</a></li>
<li><a href="Database%20Migrations">Database Migrations</a></li>
<li><a href="Collections" target="_blank">Collections</a></li>
</ul>
<h2 id="managers-and-drivers">Managers and Drivers</h2>
<ul>
<li><a href="About%20Managers">About Managers</a></li>
<li><a href="About%20Drivers">About Drivers</a></li>
<li><a href="Contracts">Contracts</a></li>
</ul>
<h2 id="official-packages">Official Packages</h2>
<ul>
<li><a href="Masonite%20Entry" target="_blank">Masonite Entry</a></li>
<li><a href="Masonite%20Billing" target="_blank">Masonite Billing</a></li>
</ul>
<h2 id="creating-your-first-blog">Creating Your First Blog</h2>
<ul>
<li><a href="Introduction">Introduction</a></li>
<li><a href="Part%201%20-%20Creating%20Our%20First%20Route">Part 1 - Creating Our First Route</a></li>
<li><a href="Part%202%20-%20Creating%20Our%20First%20Controller">Part 2 - Creating Our First Controller</a></li>
<li><a href="Part%203%20-%20Designing%20Our%20Blog">Part 3 - Designing Our Blog</a></li>
<li><a href="Part%204%20-%20Migrations">Part 4 - Migrations</a></li>
<li><a href="Part%205%20-%20Models">Part 5 - Models</a></li>
<li><a href="Part%203%20-%20Authentication">Part 3 - Authentication</a></li>
</ul>


  </ul>
</div>


          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title"></h1>
<div class="content ">
  <h1 id="requests">Requests</h1>
<h2 id="introduction">Introduction</h2>
<p>The Request class is initialized when the server first starts and is modified on every request. This means that the Request class acts as a singleton and is not reinitialized on every request. This presents both pros and cons during developing Masonite. It&rsquo;s great to not have to worry about a new object being instantiated everytime but the con is that some attributes need to be reset at the end of the request.</p>
<p>The Request class is loaded into the IOC container first so any Service Provider will have access to it. The IOC container allows all parts of the framework to be resolved by the IOC container and auto inject any dependencies they need.</p>
<p>{% hint style=&quot;success&rdquo; %}
Read more about the IOC container in the <a href="Service%20Container">Service Container</a> documentation.
{% endhint %}</p>
<h2 id="getting-started">Getting Started</h2>
<p>The Request class is bound into the IOC container once when the server is first started. This takes the WSGI environment variables generated by your WSGI server as a parameter. Because of this, we reload the WSGI values on every request but the actual Request object does not change. In other words, the memory address of the Request object is always the same but the class attributes will change of every request. This is done already for you by the Masonite framework itself. This Request class is bound and initialized inside the <code>AppProvider</code> Service Provider. We grab this request object by simply passing in <code>Request</code> into the parameters of anything resolved by the Service Container such as middleware, drivers and controller methods like so:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="c1"># Request is the instance of the Request class</span>
    <span class="k">pass</span>
</code></pre></div><p>Masonite is smart enough to know that we need the <code>Request</code> class and it will inject it into our method for us.</p>
<h2 id="helper-function"><strong>Helper Function</strong></h2>
<p>Masonite ships with a <code>HelpersProvider</code> Service Provider which adds several helper functions. One of these helper functions is the <code>request()</code> function. This function will return the request object. Because of this, these two pieces of code are identical:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="n">Request</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">request</span><span class="p">()</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>Notice we didn&rsquo;t import anything at the top of our file and also didn&rsquo;t retrieve any objects from the IOC container. Masonite helper functions act just like any other built in Python function.</p>
<p>{% hint style=&quot;success&rdquo; %}
Read more about helper functions in the <a href="Helper%20Functions">Helper Functions</a> documentation.
{% endhint %}</p>
<h2 id="usage">Usage</h2>
<p>The <code>Request</code> has several helper methods attached to it in order to interact with various aspects of the request.</p>
<p>In order to get the current request input variables such as the form data during a <code>POST</code> request or the query string during a <code>GET</code> request looks like:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="n">Request</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>{% hint style=&quot;info&rdquo; %}
There is no difference between any HTTP methods (GET, POST, PUT, etc) when it comes to getting input data. They are both retrieved through this <code>.input()</code> method so there is no need to make a distinction if the request is <code>GET</code> or <code>POST</code>
{% endhint %}</p>
<h2 id="method-options">Method Options</h2>
<h2 id="input-data">Input Data</h2>
<p>We can get all the request input variables such as input data from a form request or GET data from a query string. Note that it does not matter what HTTP method you are using, the input method will know what input data to get dependent on the current HTTP method (<code>GET</code>, <code>POST</code>, <code>PUT</code>, etc)</p>
<p>This will return all the available request input variables for that request as a dictionary.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># GET: /dashboard?user=Joe&amp;status=1</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="c1"># {&#39;user&#39;: &#39;Joe&#39;, &#39;status&#39;: &#39;1&#39;}</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>To get a specific input:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># GET: /dashboard?firstname=Joe</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;firstname&#39;</span><span class="p">)</span> <span class="c1"># Joe</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>To check if some request input data exists:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># GET: /dashboard?firstname=Joe</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s1">&#39;firstname&#39;</span><span class="p">)</span> <span class="c1"># True</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<h3 id="incoming-json-requests">Incoming JSON Requests</h3>
<p>All data can be retrieved as usual by using the input method above for incoming requests like form requests. Masnoite will handle <code>application/json</code> requests slightly differently. When the incoming request is JSON, masonite will load the JSON into a <code>payload</code> input which will return a dictionary representation of the JSON string.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;payload&#39;</span><span class="p">)</span> <span class="c1"># returns {&#39;id&#39;: 1, ...}</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<h2 id="url-parameters">URL Parameters</h2>
<p>To get the request parameter retrieved from the url. This is used to get variables inside: <code>/dashboard/@firstname</code> for example.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># GET: /dashboard/Joe</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s1">&#39;firstname&#39;</span><span class="p">)</span> <span class="c1"># Joe</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<h2 id="cookies">Cookies</h2>
<p>You may also set a cookie in the browser. The below code will set a cookie named <code>key</code> to the value of <code>value</code>.</p>
<p>{% hint style=&quot;info&rdquo; %}
By default, all cookies are encrypted with your secret key which is generated in your <code>.env</code> file when you installed Masonite. This is a security measure to ensure malicious Javascript code cannot fetch cookies if they are somehow retrieved. All cookies are set with the HTTP_ONLY flag meaning that Javascript cannot read them.
{% endhint %}</p>
<h3 id="creating"><strong>Creating</strong></h3>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">cookie</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>If you choose to not encrypt your values and create cookies with the plain text value then you can pass a third value of <code>True</code> or <code>False</code>. You can also be more explicit if you like:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">cookie</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">encrypt</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>All cookies are set as session cookies. This means that when the user closes out the browser completely, all cookies will be deleted.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">cookie</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">expires</span><span class="o">=</span><span class="s2">&#34;5 minutes&#34;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>This will set a cookie thats expires 5 minutes from the current time.</p>
<h3 id="reading"><strong>Reading</strong></h3>
<p>You can get all the cookies set from the browser</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">get_cookies</span><span class="p">()</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>You can get a specific cookie set from the browser</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">get_cookie</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>Again, all cookies are encrypted by default so if you set a cookie with encryption then this method will decrypt the cookie. If you set a cookie in plain text then you should pass the <code>False</code> as the second parameter here to tell Masonite not to decrypt your plain text cookie value.:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">get_cookie</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">decrypt</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>This will return the plain text version of the cookie.</p>
<p>{% hint style=&quot;warning&rdquo; %}
If Masonite attempts to decrypt a cookie but cannot then Masonite will assume that the secret key that encrypted it was changed or the cookie has been tampered with and will delete the cookie completely.</p>
<p>If your secret key has been compromised then you may change the key at anytime and all cookies set on your server will be removed.
{% endhint %}</p>
<h3 id="deleting"><strong>Deleting</strong></h3>
<p>You may also delete a cookie. This will remove it from the browser.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">delete_cookie</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<h2 id="user">User</h2>
<p>You can also get the current user from the request. This requires the <code>LoadUserMiddleware</code> middleware which is in Masonite by default. This will return an instance of the current user.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">user</span><span class="p">()</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<h2 id="redirection">Redirection</h2>
<p>You can specify a url to redirect to</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/home&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>If the url contains <code>http</code> than the route will redirect to the external website</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;http://google.com&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>You can redirect to a named route</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">redirectTo</span><span class="p">(</span><span class="s1">&#39;dashboard&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>You can also go back to a named route specified from the form input <code>back</code>. This will get the request input named <code>back</code> and redirect to that named route. This is great if you want to redirect the user to a login page and then back to where they came from. Just remember during your form submission that you need to supply a <code>back</code> input.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">back</span><span class="p">()</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>This is equivalent to:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">redirectTo</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;back&#39;</span><span class="p">))</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>You can also specify the input parameter that contains the named route</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">back</span><span class="p">(</span><span class="s1">&#39;redirect&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>Sometimes your routes may require parameters passed to it such as redirecting to a route that has a url like: <code>/url/@firstname:string/@lastname:string</code>. For this you can use the <code>send</code> method. Currently this only works with named routes.</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">back</span><span class="p">()</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s1">&#39;firstname&#39;</span><span class="p">:</span> <span class="s1">&#39;Joseph&#39;</span><span class="p">,</span> <span class="s1">&#39;lastname&#39;</span><span class="p">:</span> <span class="s1">&#39;Mancuso&#39;</span><span class="p">})</span>

    <span class="k">return</span> <span class="n">Request</span><span class="o">.</span><span class="n">redirectTo</span><span class="p">(</span><span class="s1">&#39;dashboard&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s1">&#39;firstname&#39;</span><span class="p">:</span> <span class="s1">&#39;Joseph&#39;</span><span class="p">,</span> <span class="s1">&#39;lastname&#39;</span><span class="p">:</span> <span class="s1">&#39;Mancuso&#39;</span><span class="p">})</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<h2 id="encryption-key">Encryption Key</h2>
<p>You can load a specific secret key into the request by using:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">Request</span><span class="o">.</span><span class="n">key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div><p>This will load a secret key into the request which will be used for encryptions purposes throughout your Masonite project.</p>
<p>{% hint style=&quot;warning&rdquo; %}
Note that by default, the secret key is pulled from your configuration file so you do NOT need to supply a secret key, but the option is there if you need to change it for testing and development purposes.
{% endhint %}</p>
<h2 id="headers">Headers</h2>
<p>You can also get and set any headers that the request has.</p>
<p>You can get all WSGI information by printing:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">Request</span><span class="o">.</span><span class="n">environ</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>This will print the environment setup by the WSGI server. Use this for development purposes.</p>
<p>You can also get a specific header:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="n">Request</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s1">&#39;AUTHORIZATION&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>This will return whatever the <code>HTTP_AUTHORIZATION</code> header if one exists. If that does not exist then the <code>AUTHORIZATION</code> header will be returned. If that does not exist then <code>None</code> will be returned.</p>
<p>We can also set headers:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Request</span><span class="p">):</span>
    <span class="n">Request</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s1">&#39;AUTHORIZATION&#39;</span><span class="p">,</span> <span class="s1">&#39;Bearer some-secret-key&#39;</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>{% hint style=&quot;warning&rdquo; %}
Masonite will automatically prepend a <code>HTTP_</code> to the header being set for standards purposes so this will set the <code>HTTP_AUTHORIZATION</code> header. If you do not want the <code>HTTP</code> prefix then pass a third parameter:
{% endhint %}</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;app/http/controllers/YourController.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">Request</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s1">&#39;AUTHORIZATION&#39;</span><span class="p">,</span> <span class="s1">&#39;Bearer some-secret-key&#39;</span><span class="p">,</span> <span class="n">http_prefix</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>This will set the <code>AUTHORIZATION</code> header <strong>instead</strong> of the <code>HTTP_AUTHORIZATION</code> header.</p>
<h2 id="status-codes">Status Codes</h2>
<p>Masonite will set a status code of <code>404 Not Found</code> at the beginning of every request. If the status code is not changed throughout the code, either through the developer or third party packages, as it passes through each Service Provider then the status code will continue to be <code>404 Not Found</code> when the output is generated. You do not have to explicitly specify this as the framework itself handles status codes. If a route matches and your controller method is about to be hit then Masonite will set <code>200 OK</code> and hit your route. This allows Masonite to specify a good status code but also allows you to change it again inside your controller method.</p>
<p>You could change this status code in either any of your controllers or even a third party package via a Service Provider.</p>
<p>For example, the Masonite Entry package sets certain status codes upon certain actions on an API endpoint. These can be <code>429 Too Many Requests</code> or <code>201 Created</code>. These status codes need to be set before the <code>StartProvider</code> is ran so if you have a third party package that sets status codes or headers, then they will need to be placed above this Service Provider in a project.</p>
<p>If you are not specifying status codes in a package and simple specifying them in a controller then you can do so freely without any caveats. You can set status codes like so:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">Request</span><span class="o">.</span><span class="n">status</span><span class="p">(</span><span class="s1">&#39;429 Too Many Requests&#39;</span><span class="p">)</span>
</code></pre></div><p>This will set the correct status code before the output is sent to the browser. You can look up a list of HTTP status codes from an online resource and specify any you need to. There are no limitations to which ones you can use.</p>
<h2 id="changing-request-methods-in-forms">Changing Request Methods in Forms</h2>
<p>Typically, forms only have support for <code>GET</code> and <code>POST</code>. You may want to change what HTTP method is used when submitting a form such as <code>PATCH</code>.</p>
<p>This will look like:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;resources/templates/index.html&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&lt;form action=&#34;/dashboard&#34; method=&#34;POST&#34;&gt;
    &lt;input type=&#34;hidden&#34; name=&#34;request_method&#34; value=&#34;PATCH&#34;&gt;
&lt;/form&gt;
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>or you can optionally use a helper method:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;resources/templates/index.html&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&lt;form action=&#34;/dashboard&#34; method=&#34;POST&#34;&gt;
    {{ request_method(&#39;PATCH&#39;)|safe }}
&lt;/form&gt;
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>
<p>When the form is submitted, it will process as a PUT request instead of a POST request.</p>
<p>This will allow this form to hit a route like this:</p>
<p>{% code-tabs %}
{% code-tabs-item title=&quot;routes/web.py&rdquo; %}</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">masonite.routes</span> <span class="kn">import</span> <span class="n">Patch</span>

<span class="n">ROUTES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Patch</span><span class="p">()</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/dashboard&#39;</span><span class="p">,</span> <span class="s1">&#39;DashboardController@update&#39;</span><span class="p">)</span>
<span class="p">]</span>
</code></pre></div><p>{% endcode-tabs-item %}
{% endcode-tabs %}</p>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
